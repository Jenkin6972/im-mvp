<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¢æœå·¥ä½œå° - IM MVP</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f0f2f5; height: 100vh; }
        .login-container { display: flex; align-items: center; justify-content: center; height: 100vh; }
        .login-box { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); width: 360px; }
        .login-box h2 { text-align: center; margin-bottom: 30px; color: #333; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #666; }
        .form-group input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        .form-group input:focus { border-color: #1890ff; outline: none; }
        .btn { width: 100%; padding: 12px; background: #1890ff; color: white; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; }
        .btn:hover { background: #40a9ff; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        .error { color: #ff4d4f; font-size: 14px; margin-top: 10px; text-align: center; }
        
        .workspace { display: none; height: 100vh; }
        .header { background: #1890ff; color: white; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; }
        .header h1 { font-size: 18px; font-weight: 500; }
        .header-right { display: flex; align-items: center; gap: 16px; }
        .status-select { padding: 6px 12px; border-radius: 4px; border: none; }
        .logout-btn { background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 16px; border-radius: 4px; cursor: pointer; }
        
        .main { display: flex; height: calc(100vh - 56px); }
        .sidebar { width: 300px; background: white; border-right: 1px solid #e8e8e8; display: flex; flex-direction: column; }
        .sidebar-header { padding: 16px; border-bottom: 1px solid #e8e8e8; font-weight: 500; }
        .conversation-list { flex: 1; overflow-y: auto; }
        .conversation-item { padding: 16px; border-bottom: 1px solid #f0f0f0; cursor: pointer; display: flex; align-items: center; }
        .conversation-item:hover { background: #f5f5f5; }
        .conversation-item.active { background: #e6f7ff; }
        .conv-avatar { width: 40px; height: 40px; border-radius: 50%; background: #1890ff; color: white; display: flex; align-items: center; justify-content: center; margin-right: 12px; }
        .conv-info { flex: 1; min-width: 0; }
        .conv-name { font-weight: 500; margin-bottom: 4px; }
        .conv-preview { color: #999; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .conv-time { color: #999; font-size: 12px; }
        .conv-unread { background: #ff4d4f; color: white; font-size: 12px; padding: 2px 6px; border-radius: 10px; margin-left: 8px; }
        
        .chat-area { flex: 1; display: flex; flex-direction: column; background: #f5f5f5; }
        .chat-header { background: white; padding: 16px 24px; border-bottom: 1px solid #e8e8e8; display: flex; align-items: center; justify-content: space-between; }
        .chat-title { font-weight: 500; }
        .header-actions { display: flex; gap: 8px; }
        .transfer-btn { background: #faad14; color: white; border: none; padding: 6px 16px; border-radius: 4px; cursor: pointer; }
        .info-btn { background: #1890ff; color: white; border: none; padding: 6px 16px; border-radius: 4px; cursor: pointer; }
        .close-conv-btn { background: #ff4d4f; color: white; border: none; padding: 6px 16px; border-radius: 4px; cursor: pointer; }
        .chat-messages { flex: 1; overflow-y: auto; padding: 24px; }
        .msg-wrapper { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 16px; }
        .msg-wrapper.msg-wrapper-left { flex-direction: row; }
        .msg-wrapper.msg-wrapper-right { flex-direction: row-reverse; }
        .msg-avatar { width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 14px; color: white; }
        .msg-avatar-customer { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .msg-avatar-agent { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .msg-bubble { max-width: 60%; }
        .msg { padding: 12px 16px; border-radius: 12px; word-break: break-word; }
        .msg-left { background: white; border-bottom-left-radius: 4px; }
        .msg-right { background: #1890ff; color: white; border-bottom-right-radius: 4px; }
        .msg-time { font-size: 11px; color: #999; margin-top: 4px; }
        .msg-wrapper-right .msg-time { text-align: right; }
        .msg-system { text-align: center; color: #999; font-size: 13px; margin: 16px 0; }
        .chat-input-area { background: white; padding: 16px 24px; border-top: 1px solid #e8e8e8; display: flex; gap: 12px; }
        .chat-input { flex: 1; padding: 12px 16px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; resize: none; }
        .chat-input:focus { border-color: #1890ff; outline: none; }
        .send-btn { background: #1890ff; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; }
        .send-btn:disabled { background: #ccc; }

        .empty-chat { display: flex; align-items: center; justify-content: center; height: 100%; color: #999; }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.show { display: flex; }
        .modal-content { background: white; padding: 24px; border-radius: 8px; min-width: 400px; max-width: 500px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .modal-header h3 { margin: 0; }
        .modal-close { background: none; border: none; font-size: 20px; cursor: pointer; color: #999; }
        .modal-body { margin-bottom: 16px; }
        .info-row { display: flex; padding: 8px 0; border-bottom: 1px solid #f0f0f0; }
        .info-label { width: 100px; color: #666; }
        .info-value { flex: 1; word-break: break-all; }
        .form-select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 12px; }
        .form-textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; min-height: 80px; resize: vertical; }
        .modal-footer { text-align: right; }
        .modal-footer .btn { width: auto; padding: 8px 20px; }

        /* å†å²ä¼šè¯åˆ—è¡¨ */
        .history-conv-item { display: flex; padding: 14px 16px; border-bottom: 1px solid #f0f0f0; cursor: pointer; transition: background 0.2s; }
        .history-conv-item:hover { background: #f5f5f5; }
        .history-conv-info { flex: 1; }
        .history-conv-header { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
        .history-conv-id { font-weight: 600; color: #333; }
        .history-conv-status { font-size: 12px; padding: 2px 8px; border-radius: 10px; }
        .history-conv-status.status-0 { background: #fff7e6; color: #fa8c16; }
        .history-conv-status.status-1 { background: #e6f7ff; color: #1890ff; }
        .history-conv-status.status-2 { background: #f5f5f5; color: #999; }
        .history-conv-meta { font-size: 12px; color: #999; margin-bottom: 4px; }
        .history-conv-preview { font-size: 13px; color: #666; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 500px; }
        .history-conv-arrow { color: #ccc; font-size: 18px; display: flex; align-items: center; }
        .history-msg-item { max-width: 85%; padding: 10px 14px; border-radius: 12px; margin-bottom: 10px; word-break: break-word; }
        .history-msg-left { background: white; margin-right: auto; border-bottom-left-radius: 4px; }
        .history-msg-right { background: #1890ff; color: white; margin-left: auto; border-bottom-right-radius: 4px; }
        .history-msg-system { text-align: center; color: #999; font-size: 12px; margin: 10px 0; }
        .history-msg-time { font-size: 11px; opacity: 0.7; margin-top: 4px; }
        .history-pagination { display: flex; justify-content: center; gap: 8px; }
        .history-pagination button { padding: 6px 12px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer; }
        .history-pagination button:hover:not(:disabled) { border-color: #1890ff; color: #1890ff; }
        .history-pagination button:disabled { color: #ccc; cursor: not-allowed; }
        .history-empty { text-align: center; padding: 40px; color: #999; }
        .panel-action-row { margin-top: 16px; padding-top: 16px; border-top: 1px solid #eee; }
        .panel-action-btn { width: 100%; padding: 10px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
        .panel-action-btn:hover { background: #e8e8e8; border-color: #1890ff; color: #1890ff; }

        /* Toast æç¤º */
        .toast-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.75);
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            z-index: 2000;
            font-size: 14px;
            animation: toast-in 0.3s ease;
        }
        .toast-message.fade-out {
            animation: toast-out 0.3s ease;
        }
        @keyframes toast-in {
            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        @keyframes toast-out {
            from { opacity: 1; transform: translateX(-50%) translateY(0); }
            to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }

        /* æ¶ˆæ¯çŠ¶æ€ */
        .msg-status { font-size: 11px; margin-left: 8px; opacity: 0.8; }
        .msg-status.read { color: #52c41a; }
        .msg-status.sending { color: #999; }

        /* å¿«æ·å›å¤ */
        .quick-reply-bar { position: relative; }
        .quick-reply-toggle { background: #faad14; color: white; border: none; padding: 12px 16px; border-radius: 4px; cursor: pointer; font-size: 16px; }
        .quick-reply-toggle:hover { background: #ffc53d; }
        .quick-reply-dropdown { position: absolute; bottom: 100%; left: 0; background: white; border: 1px solid #ddd; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); min-width: 200px; max-height: 300px; overflow-y: auto; margin-bottom: 8px; }
        .quick-reply-item { padding: 10px 16px; cursor: pointer; border-bottom: 1px solid #f0f0f0; }
        .quick-reply-item:hover { background: #f5f5f5; }
        .quick-reply-item:last-child { border-bottom: none; }
        .quick-reply-empty { padding: 16px; color: #999; text-align: center; }

        /* è¶…ç®¡æ¨¡å¼åˆ‡æ¢ */
        .admin-mode-toggle { display: flex; align-items: center; gap: 8px; }
        .admin-mode-toggle label { cursor: pointer; display: flex; align-items: center; gap: 4px; }
        .admin-mode-toggle input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; }
        .god-view-label { color: #fff; font-size: 12px; background: #722ed1; padding: 2px 8px; border-radius: 4px; }

        /* ç­›é€‰æ  */
        .filter-bar { padding: 12px 16px; border-bottom: 1px solid #e8e8e8; display: flex; gap: 8px; flex-wrap: wrap; }
        .filter-bar select { padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px; }

        /* ç®¡ç†ä¸­å¿ƒä¸‹æ‹‰èœå• */
        .admin-dropdown { position: relative; }
        .admin-dropdown-btn { background: #52c41a; color: white; border: none; padding: 6px 16px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 4px; }
        .admin-dropdown-btn:hover { background: #73d13d; }
        .admin-dropdown-btn::after { content: 'â–¼'; font-size: 10px; }
        .admin-dropdown-menu { position: absolute; top: 100%; right: 0; background: white; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); min-width: 140px; margin-top: 4px; display: none; z-index: 100; }
        .admin-dropdown.open .admin-dropdown-menu { display: block; }
        .admin-dropdown-item { padding: 10px 16px; cursor: pointer; color: #333; border-bottom: 1px solid #f0f0f0; }
        .admin-dropdown-item:hover { background: #f5f5f5; }
        .admin-dropdown-item:last-child { border-bottom: none; }

        /* ç»Ÿè®¡é¡µé¢æ ·å¼ */
        .stats-container { padding: 24px; overflow-y: auto; height: calc(100vh - 56px); }
        .stats-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .stats-header h2 { margin: 0; font-size: 20px; }
        .back-btn { background: #1890ff; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }
        .stats-filter { display: flex; gap: 12px; margin-bottom: 24px; }
        .stats-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .stats-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stats-card-title { color: #666; font-size: 14px; margin-bottom: 8px; }
        .stats-card-value { font-size: 28px; font-weight: bold; color: #1890ff; }
        .stats-table-container { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stats-table { width: 100%; border-collapse: collapse; }
        .stats-table th, .stats-table td { padding: 12px; text-align: left; border-bottom: 1px solid #f0f0f0; }
        .stats-table th { background: #fafafa; font-weight: 500; color: #666; }
        .stats-table tr:hover { background: #f5f5f5; }
        .stats-table-title { font-size: 16px; font-weight: 500; margin-bottom: 16px; }

        /* åªè¯»æ¨¡å¼æç¤º */
        .readonly-notice { background: #fff7e6; border: 1px solid #ffd591; color: #d46b08; padding: 12px 16px; text-align: center; font-size: 14px; }

        /* å®¢æœç®¡ç†é¡µé¢æ ·å¼ */
        .agent-mgmt-container { padding: 24px; overflow-y: auto; height: calc(100vh - 56px); }
        .agent-mgmt-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .agent-mgmt-header h2 { margin: 0; font-size: 20px; }
        .add-agent-btn { background: #52c41a; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }
        .add-agent-btn:hover { background: #73d13d; }
        .agent-table-container { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .agent-table { width: 100%; border-collapse: collapse; }
        .agent-table th, .agent-table td { padding: 12px; text-align: left; border-bottom: 1px solid #f0f0f0; }
        .agent-table th { background: #fafafa; font-weight: 500; color: #666; }
        .agent-table tr:hover { background: #f5f5f5; }
        .agent-status { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 12px; }
        .agent-status.online { background: #f6ffed; color: #52c41a; }
        .agent-status.offline { background: #f5f5f5; color: #999; }
        .agent-status.busy { background: #fff7e6; color: #faad14; }
        .agent-role { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 12px; }
        .agent-role.admin { background: #f9f0ff; color: #722ed1; }
        .agent-role.normal { background: #e6f7ff; color: #1890ff; }
        .action-btn { border: none; padding: 4px 12px; border-radius: 4px; cursor: pointer; margin-right: 8px; font-size: 13px; }
        .action-btn.edit { background: #e6f7ff; color: #1890ff; }
        .action-btn.edit:hover { background: #bae7ff; }
        .action-btn.delete { background: #fff1f0; color: #ff4d4f; }
        .action-btn.delete:hover { background: #ffccc7; }

        /* å³ä¾§å®¢æˆ·ä¿¡æ¯é¢æ¿ */
        .customer-panel { width: 280px; background: white; border-left: 1px solid #e8e8e8; display: flex; flex-direction: column; }
        .customer-panel-header { padding: 16px; border-bottom: 1px solid #e8e8e8; font-weight: 500; display: flex; justify-content: space-between; align-items: center; }
        .panel-close-btn { background: none; border: none; font-size: 20px; cursor: pointer; color: #999; padding: 0; line-height: 1; }
        .panel-close-btn:hover { color: #333; }
        .customer-panel-body { flex: 1; overflow-y: auto; padding: 16px; }
        .panel-info-row { padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .panel-info-label { color: #666; font-size: 12px; margin-bottom: 4px; }
        .panel-info-value { color: #333; font-size: 14px; word-break: break-all; }
        .panel-info-value a { color: #1890ff; text-decoration: none; }
        .panel-info-value a:hover { text-decoration: underline; }
        /* é‚®ç®±ç¼–è¾‘åŒºåŸŸ */
        .email-display { display: flex; align-items: center; gap: 8px; }
        .email-text { flex: 1; word-break: break-all; }
        .email-edit-btn { background: none; border: none; color: #1890ff; cursor: pointer; font-size: 14px; padding: 0; }
        .email-edit-btn:hover { color: #40a9ff; }
        .email-edit-form { display: none; }
        .email-edit-form.show { display: flex; gap: 8px; align-items: center; }
        .email-edit-input { flex: 1; padding: 6px 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px; }
        .email-edit-input:focus { border-color: #1890ff; outline: none; }
        .email-save-btn { background: #1890ff; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .email-save-btn:hover { background: #40a9ff; }
        .email-cancel-btn { background: #f0f0f0; color: #666; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .email-cancel-btn:hover { background: #e0e0e0; }
        .panel-section-title { font-weight: 500; color: #333; font-size: 13px; margin-top: 16px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e8e8e8; }
        .panel-stats-row { display: flex; justify-content: space-between; padding: 8px 0; }
        .panel-stats-label { color: #666; font-size: 13px; }
        .panel-stats-value { color: #1890ff; font-weight: 500; }

        /* æ–‡æ¡ˆé…ç½®æ ·å¼ */
        .config-group { margin-bottom: 24px; }
        .config-group-title { font-weight: 600; color: #333; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #1890ff; }
        .config-item { background: #f9f9f9; border-radius: 8px; padding: 16px; margin-bottom: 12px; }
        .config-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .config-item-key { font-weight: 500; color: #333; }
        .config-item-desc { color: #666; font-size: 12px; }
        .config-item-values { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .config-lang-field { display: flex; flex-direction: column; }
        .config-lang-label { font-size: 12px; color: #666; margin-bottom: 4px; }
        .config-lang-input { padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        .config-lang-input:focus { border-color: #1890ff; outline: none; }
        .config-save-btn { background: #52c41a; color: white; border: none; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .config-save-btn:hover { background: #73d13d; }
        .config-save-btn:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>
    <!-- ç™»å½•é¡µ -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <h2>å®¢æœç™»å½•</h2>
            <div class="form-group">
                <label>ç”¨æˆ·å</label>
                <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
            </div>
            <div class="form-group">
                <label>å¯†ç </label>
                <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç ">
            </div>
            <button class="btn" id="loginBtn">ç™»å½•</button>
            <div class="error" id="loginError"></div>
        </div>
    </div>

    <!-- å·¥ä½œå° -->
    <div class="workspace" id="workspace">
        <div class="header">
            <h1>å®¢æœå·¥ä½œå°</h1>
            <div class="header-right">
                <span id="agentName"></span>
                <!-- è¶…ç®¡ä¸“å±ï¼šä¸Šå¸è§†è§’åˆ‡æ¢ -->
                <div class="admin-mode-toggle" id="adminModeToggle" style="display:none;">
                    <label>
                        <input type="checkbox" id="godViewCheckbox">
                        <span class="god-view-label">ä¸Šå¸è§†è§’</span>
                    </label>
                </div>
                <!-- è¶…ç®¡ä¸“å±ï¼šç®¡ç†ä¸­å¿ƒä¸‹æ‹‰èœå• -->
                <div class="admin-dropdown" id="adminDropdown" style="display:none;">
                    <button class="admin-dropdown-btn" id="adminDropdownBtn">ç®¡ç†ä¸­å¿ƒ</button>
                    <div class="admin-dropdown-menu">
                        <div class="admin-dropdown-item" id="statsMenuItem">ğŸ“Š ç»Ÿè®¡æŠ¥è¡¨</div>
                        <div class="admin-dropdown-item" id="agentMgmtMenuItem">ğŸ‘¥ å®¢æœç®¡ç†</div>
                        <div class="admin-dropdown-item" id="textConfigMenuItem">ğŸŒ æ–‡æ¡ˆé…ç½®</div>
                    </div>
                </div>
                <select class="status-select" id="statusSelect">
                    <option value="1">åœ¨çº¿</option>
                    <option value="2">ç¦»çº¿</option>
                    <option value="3">å¿™ç¢Œ</option>
                </select>
                <button class="logout-btn" id="logoutBtn">é€€å‡º</button>
            </div>
        </div>
        <div class="main" id="mainContent">
            <div class="sidebar">
                <div class="sidebar-header">
                    <span id="sidebarTitle">ä¼šè¯åˆ—è¡¨</span>
                </div>
                <!-- ç­›é€‰æ  -->
                <div class="filter-bar" id="filterBar" style="display:none;">
                    <select id="statusFilter">
                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                        <option value="0">å¾…åˆ†é…</option>
                        <option value="1">è¿›è¡Œä¸­</option>
                        <option value="2">å·²å…³é—­</option>
                    </select>
                    <select id="agentFilter" style="display:none;">
                        <option value="">å…¨éƒ¨å®¢æœ</option>
                    </select>
                </div>
                <div class="conversation-list" id="convList"></div>
            </div>
            <div class="chat-area" id="chatArea">
                <div class="empty-chat">è¯·é€‰æ‹©ä¸€ä¸ªä¼šè¯</div>
            </div>
            <!-- å³ä¾§å®¢æˆ·ä¿¡æ¯é¢æ¿ -->
            <div class="customer-panel" id="customerPanel" style="display:none;">
                <div class="customer-panel-header">
                    <span>å®¢æˆ·ä¿¡æ¯</span>
                    <button class="panel-close-btn" onclick="toggleCustomerPanel()">&times;</button>
                </div>
                <div class="customer-panel-body" id="customerPanelBody">
                    <!-- å®¢æˆ·ä¿¡æ¯å°†åŠ¨æ€å¡«å…… -->
                </div>
            </div>
        </div>
        <!-- ç»Ÿè®¡é¡µé¢ -->
        <div class="stats-container" id="statsContainer" style="display:none;"></div>
        <!-- å®¢æœç®¡ç†é¡µé¢ -->
        <div class="agent-mgmt-container" id="agentMgmtContainer" style="display:none;"></div>
    </div>

    <!-- å®¢æˆ·ä¿¡æ¯å¼¹çª— -->
    <div class="modal" id="customerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>å®¢æˆ·ä¿¡æ¯</h3>
                <button class="modal-close" onclick="closeModal('customerModal')">&times;</button>
            </div>
            <div class="modal-body" id="customerInfo"></div>
        </div>
    </div>

    <!-- å®¢æœç¼–è¾‘å¼¹çª— -->
    <div class="modal" id="agentEditModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="agentEditTitle">æ–°å¢å®¢æœ</h3>
                <button class="modal-close" onclick="closeModal('agentEditModal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editAgentId">
                <div class="form-group">
                    <label>ç”¨æˆ·å <span style="color:#ff4d4f">*</span></label>
                    <input type="text" id="editAgentUsername" placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆç™»å½•è´¦å·ï¼‰">
                </div>
                <div class="form-group">
                    <label>å¯†ç  <span id="passwordHint" style="color:#999;font-size:12px;"></span></label>
                    <input type="password" id="editAgentPassword" placeholder="è¯·è¾“å…¥å¯†ç ">
                </div>
                <div class="form-group">
                    <label>æ˜µç§°</label>
                    <input type="text" id="editAgentNickname" placeholder="è¯·è¾“å…¥æ˜µç§°ï¼ˆæ˜¾ç¤ºåç§°ï¼‰">
                </div>
                <div class="form-group">
                    <label>æœ€å¤§æ¥å¾…æ•°</label>
                    <input type="number" id="editAgentMaxSessions" placeholder="é»˜è®¤10" value="10" min="1" max="100">
                </div>
                <div class="form-group">
                    <label>è§’è‰²</label>
                    <select class="form-select" id="editAgentRole">
                        <option value="0">æ™®é€šå®¢æœ</option>
                        <option value="1">ç®¡ç†å‘˜</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="submitAgentEdit()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- è½¬ç§»ä¼šè¯å¼¹çª— -->
    <div class="modal" id="transferModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>è½¬ç§»ä¼šè¯</h3>
                <button class="modal-close" onclick="closeModal('transferModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 12px;">é€‰æ‹©ç›®æ ‡å®¢æœï¼š</div>
                <select class="form-select" id="transferAgentSelect">
                    <option value="">è¯·é€‰æ‹©å®¢æœ</option>
                </select>
                <div style="margin: 12px 0;">è½¬ç§»åŸå› ï¼ˆå¯é€‰ï¼‰ï¼š</div>
                <textarea class="form-textarea" id="transferReason" placeholder="è¯·è¾“å…¥è½¬ç§»åŸå› "></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="submitTransfer()">ç¡®è®¤è½¬ç§»</button>
            </div>
        </div>
    </div>

    <!-- å®¢æˆ·å†å²ä¼šè¯å¼¹çª— -->
    <div class="modal" id="customerHistoryModal">
        <div class="modal-content" style="width: 700px; max-height: 85vh;">
            <div class="modal-header">
                <h3>ğŸ“‹ å†å²ä¼šè¯è®°å½•</h3>
                <button class="modal-close" onclick="closeModal('customerHistoryModal')">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 65vh; overflow-y: auto; padding: 0;">
                <div id="customerHistoryList">
                    <!-- ä¼šè¯åˆ—è¡¨å°†åŠ¨æ€å¡«å…… -->
                </div>
                <div id="customerHistoryPagination" style="text-align: center; padding: 12px; border-top: 1px solid #eee;"></div>
            </div>
        </div>
    </div>

    <!-- å†å²ä¼šè¯æ¶ˆæ¯è¯¦æƒ…å¼¹çª— -->
    <div class="modal" id="historyMessagesModal">
        <div class="modal-content" style="width: 600px; max-height: 85vh;">
            <div class="modal-header">
                <h3 id="historyMessagesTitle">ä¼šè¯è¯¦æƒ…</h3>
                <button class="modal-close" onclick="closeModal('historyMessagesModal')">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 65vh; overflow-y: auto; padding: 0;">
                <div id="historyMessagesList" style="padding: 16px; background: #f5f5f5;">
                    <!-- æ¶ˆæ¯åˆ—è¡¨å°†åŠ¨æ€å¡«å…… -->
                </div>
            </div>
        </div>
    </div>

    <!-- æ–‡æ¡ˆé…ç½®å¼¹çª— -->
    <div class="modal" id="textConfigModal">
        <div class="modal-content" style="width: 800px; max-height: 90vh;">
            <div class="modal-header">
                <h3>ğŸŒ æ–‡æ¡ˆé…ç½®</h3>
                <button class="modal-close" onclick="closeModal('textConfigModal')">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div style="margin-bottom: 16px; display: flex; align-items: center; gap: 12px;">
                    <span>å®¢æˆ·ç«¯é»˜è®¤è¯­è¨€ï¼š</span>
                    <select id="sdkLanguageSelect" style="padding: 6px 12px; border-radius: 4px; border: 1px solid #ddd;">
                        <option value="en">English (è‹±æ–‡)</option>
                        <option value="zh">ä¸­æ–‡</option>
                    </select>
                    <button class="btn" onclick="saveLanguageSetting()" style="padding: 6px 16px;">ä¿å­˜è¯­è¨€è®¾ç½®</button>
                </div>
                <div style="border-bottom: 1px solid #eee; margin-bottom: 16px;"></div>
                <div id="textConfigList">
                    <!-- é…ç½®é¡¹å°†åŠ¨æ€å¡«å…… -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeModal('textConfigModal')">å…³é—­</button>
            </div>
        </div>
    </div>

    <script src="agent.js"></script>
</body>
</html>

